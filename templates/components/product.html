{% extends 'base/base.html' %}
{% load static %}
{% load humanize %}

{% block head %}
{% endblock %}

{% block css %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/slideshow.css' %}">
    <link rel="stylesheet" href="{% static 'css/zoombox.css' %}">

<style>
 .zoomcontainer { margin: 70px auto; max-width: 960px; }
  .thumb { height: 60px; width: 60px; }

#gallcontainer {
    width:70%;
    height:70%;
    max-width:800px;
    max-height:500px;
    margin:100px auto;
    position:relative;
}

/* Style the tab */
.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
}

/* Style the buttons inside the tab */
.tab button {
  background-color: inherit;
  float: right;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
  font-size: 17px;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
  display: none;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
  border-bottom: none ;
}
svg:hover {
    cursor: pointer;
}


/*the container must be positioned relative:*/
.custom-select {
  position: relative;
  font-family: Arial;
}

.custom-select select {
  display: none; /*hide original SELECT element:*/
}

.select-selected {
  background-color: DodgerBlue;
}

/*style the arrow inside the select element:*/
.select-selected:after {
  position: absolute;
  content: "";
  top: 14px;
  right: 10px;
  width: 0;
  height: 0;
  border: 6px solid transparent;
  border-color: #fff transparent transparent transparent;
}

/*point the arrow upwards when the select box is open (active):*/
.select-selected.select-arrow-active:after {
  border-color: transparent transparent #fff transparent;
  top: 7px;
}

/*style the items (options), including the selected item:*/
.select-items div,.select-selected {
  color: #ffffff;
  padding: 8px 16px;
  border: 1px solid transparent;
  border-color: transparent transparent rgba(0, 0, 0, 0.1) transparent;
  cursor: pointer;
  user-select: none;
}

/*style items (options):*/
.select-items {
  position: absolute;
  background-color: DodgerBlue;
  top: 100%;
  left: 0;
  right: 0;
  z-index: 99;
}

/*hide the items when the select box is closed:*/
.select-hide {
  display: none;
}

.select-items div:hover, .same-as-selected {
  background-color: rgba(0, 0, 0, 0.1);
}

</style>
{% endblock %}
{% block title %}
    محصولات
{% endblock %}
{% block body %}
<div class="container d-flex  mw-100 border">
    <div class="container bg-light shadow border row mw-100 d-flex flex-wrap justify-content-between" style="height: 100%">
        <div class="">
            <div id="favorite">
               {% if favorite %}
                   <svg onclick="favorite_add({{ min_shop.id }})" xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                   </svg>
                   {{ min_shop.favorite_count }}
               {% else %}
                   <svg onclick="favorite_add({{ min_shop.id }})" xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" class="bi bi-heart" viewBox="0 0 16 16">
                        <path d="M8 2.748l-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"/>
                   </svg>
               {% endif %}
            </div>
            <a href="{% url 'home_index' %}">
                <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" class="bi bi-house-door" viewBox="0 0 16 16">
                    <path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z"/>
                </svg>
            </a>
            <br>
                <svg onclick="scrollCity(event, 'Paris')" xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" class="bi bi-list-check" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3.854 2.146a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0l-.5-.5a.5.5 0 1 1 .708-.708L2 3.293l1.146-1.147a.5.5 0 0 1 .708 0zm0 4a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0l-.5-.5a.5.5 0 1 1 .708-.708L2 7.293l1.146-1.147a.5.5 0 0 1 .708 0zm0 4a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0l-.5-.5a.5.5 0 0 1 .708-.708l.146.147 1.146-1.147a.5.5 0 0 1 .708 0z"/>
                </svg>
        </div>
        <div class="col-md-11 col-lg-4 border" style="height: 75%"> <img  class="example" src="{{ product.image.url }}" alt="{{ product.image.url }}" width="100%">
        </div>
        <div class="container d-flex flex-wrap col-sm-12 col-md-6 col-lg-4 mh-100 align-items-center h5">
            <div class="col-12"><i class="bi bi-globe"></i>  {{ product.name }}</div>
            <div class="col-12"><i class="bi bi-upc-scan"></i>  {{ product.brand }}</div>
            <div class="col-12"><i class="bi bi-diagram-3-fill"></i>  {{ product.category }}</div>
            <div class="col-12"><i class="bi bi-chat-text-fill"></i>  {{ product.detail }}</div>
            {% for catmeta in categorymeta %}
                 <label class="col-4" for="meta{{ forloop.counter }}">{{ catmeta }}</label>
                    <form class="col-8 d-flex " id="meta{{ forloop.counter }}">
                    {% csrf_token %}
                      {% for val in categoryvalues %}
                          {% if val.label == catmeta %}
                              <label for="{{ val.id }}">{{ val.value }}</label>
                              <input type="radio" id="{{ val.id }}" name="metaVal{{ catmeta.id }}" value="{{ val.value }}">
                          {% endif %}
                      {% endfor %}
                    </form>
            {% endfor %}
        </div>
        <div class="d-flex flex-wrap col-sm-12 col-md-6 col-lg-3 h5">
            <div class="col-12 h4 text-info">اطلاعات خرید</div>
            <div class="col-12"><i class="bi bi-shop"></i> فروشگاه {{ min_shop.shop.name }} </div>
            <div class="col-12"><i class="bi bi-award-fill"></i> گارانتی اصالت و سلامت</div>
            {% if discount > 0 %}
                <div class="text-black-50 col-9"> قیمت فروشنده:<del>{{ price|intcomma }}</del></div>
                <div class="bg-danger col-3 px-4 d-flex rounded-pill text-light justify-content-center align-items-center"> %{{ discount }}</div>
            {% endif %}
            <div class="counter col-12 text-info" data-number="34534543"> مبلغ : {{ min_price|intcomma }} تومان</div>
            {% if user.is_authenticated %}
                <button class="col-12 w-75 btn-danger rounded-pill" onclick= "add_product({{ shp_id }})">اضافه کردن به سبد کالا</button>
            {% else %}
                <div class="disabled-link"><button onclick= "add_product({{ shp_id }})" class="w-75 btn-success">اضافه کردن به سبد کالا</button></div>
                <div class="h6 text-warning"> * برای اضافه کردن کالا وارد حساب کاربری شوید.</div>
            {% endif %}
        </div>
        <div class="d-flex justify-content-between col-2 border p-1" style="height: 20%">
            {% for gall in gallery %}
                <div class="border"><a class="zoombox zgallery1" title="{{ gall.title }}" href="{{ gall.image.url }}"><img src="{{ gall.image.url }}"  class="thumb" width="60px" /></a> </div>
            {% endfor %}
        </div>
    </div>
</div>
<div class="container" style="z-index: 100; height: 650px; width: 800px;left: 400px;top: 250px; position: absolute;">
    <div id="gallcontainer" style="visibility: hidden" >
        <div id="slideshow" class="fullscreen">
            {% for gall in gallery %}
                {% if forloop.counter == 1 %}
                    <div id="img-1" data-img-id="{{ forloop.counter }}" class="img-wrapper active" style="background-image: url('{{ gall.image.url }}')"></div>
                {% else %}
                    <div id="img-2" data-img-id="{{ forloop.counter }}" class="img-wrapper" style="background-image: url('{{ gall.image.url }}')"></div>
                {% endif %}
            {% endfor %}
            <div class="thumbs-container bottom">
                <div id="prev-btn" class="prev"> <i class="fa fa-chevron-left fa-3x"></i> </div>
                    <ul class="thumbs">
                        <div class="text-warning">close</div>
                            {% for gall in gallery %}
                                {% if forloop.counter == 1 %}
                                    <li data-thumb-id="{{ forloop.counter }}" class="thumb active" style="background-image: url('{{ gall.image.url }}')"></li>
                                {% else %}
                                    <li data-thumb-id="{{ forloop.counter }}" class="thumb" style="background-image: url('{{ gall.image.url }}')"></li>
                                {% endif %}
                            {% endfor %}
                    </ul>
              <div id="next-btn" class="next"> <i class="fa fa-chevron-right fa-3x"></i> </div>
            </div>
        </div>
   </div>
</div>
<div class="border   col-12">
    <br>فروشنده ها:<br>
    {% for shop in shops %}
        <div class="container bg-light d-flex row col-12 justify-content-start align-items-center border h4 shadow h-25 p-5">
            <div class="col-2"><img src="{{ shop.image.url }}" alt="{{ shop.image.url }}" height="100%"></div>
            <div class="col-2 text-info">فروشگاه {{ shop }}</div>
            <div class="col-3 text-warning">{{ shop.discreption }}</div>
            {% for shp in shops_product %}
                {% if shp.shop == shop %}
                    <div class="col-3 text-info">قیمت فروشنده: {{ shp.price|intcomma }} تومان
                        <br>
                        {% if shp.discount > 0 %}
                            <div>  تخفیف: {{ shp.discount }}%</div>
                        {% endif %}
                        <div>قیمت: {{ shp.net_price|intcomma }}</div>
                        {% if shp.quantity > 0 %}
                            <div>موجودی : {{ shp.quantity }} </div>
                        {% else %}
                            <div class="text-danger"> کالا موجود نیست </div>
                        {% endif %}
                    </div>
                        {% if shp.quantity > 0 %}
                            <button onclick= "add_product({{ shp.id }})" class="col-2 h-50 btn-success">اضافه کردن به سبد کالا</button>
                        {% else %}
                            <button disabled onclick= "add_product({{ shp.id }})" class="col-2 h-50 btn-success">اضافه کردن به سبد کالا</button>
                        {% endif %}
                {% endif %}
            {% endfor %}
        </div>
    {% endfor %}
</div>
            <div class="col-sm-12 h3">محصولات مشابه:</div>
<div class="container row mw-100">

     <div class="owl-carousel owl-two owl-rtl owl-theme  owl-loaded">
            <div class="owl-stage-outer">
                <div class="owl-stage">
                     {% for product in similar_shop_products %}
                         {% if forloop.counter <= 5 %}
                             <div class="owl-item active">
                                 <div class="container d-flex mw-100 bg-light border shadow">
                                     <a href="{% url 'product_id' product.product.id %}">
                                             <div><img src="{{ product.product.image.url }}" alt="{{ product.product.name }}" width="300px" height="280px"></div>
                                             <div>{{ product.product.name }}<br>
                                             قیمت {{ product.net_price }}</div>
                                     </a>
                                 </div>
                             </div>
                         {% endif %}
                         {% if forloop.counter > 5 %}
                             <div class="owl-item">
                                 <div class="container d-flex justify-content-center mw-100 bg-light border shadow">
                                     <a href="{% url 'product_id' product.id %}">
                                         <div><img src="{{ product.product.image.url }}" alt="{{ product.product.name }}" width="300px" height="280px"></div>
                                         <div>{{ product.product.name }}</div>
                                         <div> قیمت{{ product.net_price }}</div>
                                     </a>
                                 </div>
                             </div>
                         {% endif %}
                     {% endfor %}
                </div>
            </div>
     </div>
</div>
<div class="tab">
  <button class="tablinks" onclick="openCity(event, 'London')" id="defaultOpen">نظرات</button>
  <button class="tablinks" onclick="openCity(event, 'Paris')">مشخصات</button>
  <button class="tablinks" onclick="openCity(event, 'Tokyo')">نقد و بررسی</button>
</div>
<div id="London" class="tabcontent">
    <div class="d-flex col-12 mw-100 justify-content-start ">
        <div class="container col-10 ">
            {% if request.user.is_authenticated %}
                <div class="d-flex col-12">لطفا نظر خود را در مورد {{ product }} بنویسید:</div>
                <div class="d-flex col-12 mw-100">
                    <form id="form_comment" style="width:100%;">
{#                        {% csrf_token %}#}
                        {% for field in form %}
                            {{ field }}
                        {% endfor %}
                        <div id="review" rating="true" style="color: rgb(252, 215, 3);">
                            <i class="fas fa-star" style="cursor: pointer;"></i>
                            <i class="fas fa-star" style="cursor: pointer;"></i>
                            <i class="fas fa-star" style="cursor: pointer;"></i>
                            <i class="far fa-star" style="cursor: pointer;"></i>
                            <i class="far fa-star" style="cursor: pointer;"></i>
                        </div>
                        <input type="hidden" readonly="" id="starsInput" class="form-control form-control-sm">
                        <input class="btn btn-success w-25 float-left shadow" type="submit" value="ارسال">
                    </form>
                </div>
            {% endif %}
        </div>
        <div class="d-flex col-2 justify-content-center text-info">
            {% if 0 == comments.count %}
                <div class="text-warning"> شما اولین دیدگاه را بنویسید </div>
            {% else %}
                <div class="text-warning"> تعداد دیدگاهها: {{ comments.count }} دیدگاه </div>
            {% endif %}
        </div>
    </div>
    <div class="coteiner d-flex justify-content-start mr-5">
        <div id="comment-div">
            {% for comment in comments %}
                <div class="container d-flex flex-wrap mt-4 bg-light rounded shadow">
                    <div class="col-8 bg-info">
                        {% for prof in profiles %}
                            {% if prof.user == comment.user %}
                                {{ prof }} :
                            {% endif %}
                    {% endfor %}
               </div>
                    <div class="col-4 bg-info">{{ comment.created_at }}</div>
                        <p class="col-12">{{ comment.text }}</p>
                        <div class="col-10 bg-secondarymy">
                            {% with ''|center:5 as range %}
                                {% for i in range %}
                                    {% if forloop.counter <= comment.rate %}
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="yellow" class="bi bi-star-fill" viewBox="0 0 16 16">
                                            <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                                        </svg>
                                    {% else %}
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="yellow" class="bi bi-star" viewBox="0 0 16 16">
                                            <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.523-3.356c.329-.314.158-.888-.283-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767l-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288l1.847-3.658 1.846 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.564.564 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                                        </svg>
                                    {% endif %}
                                {% endfor %}<br>
                            {% endwith %}
                        </div>
                    <div class="d-flex col-2 justify-content-center">
{#                        {% if comment.comment_like %}#}
                            {% for commentlike in commentlikes %}
                                {% if commentlike.comment == comment and commentlike.user == request.user %}
                                    {% if commentlike.condition == True %}
                                        <div id="svg_comment{{ comment.id }}">
                                            <span id="like_count_container{{comment.id}}">{{comment.like_count}}</span>
                                                <svg onclick= "likecomment({{ comment.id }})" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hand-thumbs-up-fill" viewBox="0 0 16 16">
                                                    <path d="M6.956 1.745C7.021.81 7.908.087 8.864.325l.261.066c.463.116.874.456 1.012.964.22.817.533 2.512.062 4.51a9.84 9.84 0 0 1 .443-.05c.713-.065 1.669-.072 2.516.21.518.173.994.68 1.2 1.273.184.532.16 1.162-.234 1.733.058.119.103.242.138.363.077.27.113.567.113.856 0 .289-.036.586-.113.856-.039.135-.09.273-.16.404.169.387.107.819-.003 1.148a3.162 3.162 0 0 1-.488.9c.054.153.076.313.076.465 0 .306-.089.626-.253.912C13.1 15.522 12.437 16 11.5 16H8c-.605 0-1.07-.081-1.466-.218a4.826 4.826 0 0 1-.97-.484l-.048-.03c-.504-.307-.999-.609-2.068-.722C2.682 14.464 2 13.846 2 13V9c0-.85.685-1.432 1.357-1.616.849-.231 1.574-.786 2.132-1.41.56-.626.914-1.279 1.039-1.638.199-.575.356-1.54.428-2.59z"/>
                                                </svg>
                                                <svg onclick= "likecomment({{ comment.id }}, false)" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hand-thumbs-down" viewBox="0 0 16 16">
                                                    <path d="M8.864 15.674c-.956.24-1.843-.484-1.908-1.42-.072-1.05-.23-2.015-.428-2.59-.125-.36-.479-1.012-1.04-1.638-.557-.624-1.282-1.179-2.131-1.41C2.685 8.432 2 7.85 2 7V3c0-.845.682-1.464 1.448-1.546 1.07-.113 1.564-.415 2.068-.723l.048-.029c.272-.166.578-.349.97-.484C6.931.08 7.395 0 8 0h3.5c.937 0 1.599.478 1.934 1.064.164.287.254.607.254.913 0 .152-.023.312-.077.464.201.262.38.577.488.9.11.33.172.762.004 1.15.069.13.12.268.159.403.077.27.113.567.113.856 0 .289-.036.586-.113.856-.035.12-.08.244-.138.363.394.571.418 1.2.234 1.733-.206.592-.682 1.1-1.2 1.272-.847.283-1.803.276-2.516.211a9.877 9.877 0 0 1-.443-.05 9.364 9.364 0 0 1-.062 4.51c-.138.508-.55.848-1.012.964l-.261.065zM11.5 1H8c-.51 0-.863.068-1.14.163-.281.097-.506.229-.776.393l-.04.025c-.555.338-1.198.73-2.49.868-.333.035-.554.29-.554.55V7c0 .255.226.543.62.65 1.095.3 1.977.997 2.614 1.709.635.71 1.064 1.475 1.238 1.977.243.7.407 1.768.482 2.85.025.362.36.595.667.518l.262-.065c.16-.04.258-.144.288-.255a8.34 8.34 0 0 0-.145-4.726.5.5 0 0 1 .595-.643h.003l.014.004.058.013a8.912 8.912 0 0 0 1.036.157c.663.06 1.457.054 2.11-.163.175-.059.45-.301.57-.651.107-.308.087-.67-.266-1.021L12.793 7l.353-.354c.043-.042.105-.14.154-.315.048-.167.075-.37.075-.581 0-.211-.027-.414-.075-.581-.05-.174-.111-.273-.154-.315l-.353-.354.353-.354c.047-.047.109-.176.005-.488a2.224 2.224 0 0 0-.505-.804l-.353-.354.353-.354c.006-.005.041-.05.041-.17a.866.866 0 0 0-.121-.415C12.4 1.272 12.063 1 11.5 1z"/>
                                                </svg>
                                            <span id="dislike_count_container{{comment.id}}">{{comment.dislike_count}}</span>
                                        </div>
                                    {% elif commentlike.condition == False and commentlike.user == request.user %}
                                        <div id="svg_comment{{ comment.id }}">
                                            <span id="like_count_container{{comment.id}}">{{comment.like_count}}</span>
                                                <svg onclick= "likecomment({{ comment.id }})" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hand-thumbs-up" viewBox="0 0 16 16">
                                                    <path d="M8.864.046C7.908-.193 7.02.53 6.956 1.466c-.072 1.051-.23 2.016-.428 2.59-.125.36-.479 1.013-1.04 1.639-.557.623-1.282 1.178-2.131 1.41C2.685 7.288 2 7.87 2 8.72v4.001c0 .845.682 1.464 1.448 1.545 1.07.114 1.564.415 2.068.723l.048.03c.272.165.578.348.97.484.397.136.861.217 1.466.217h3.5c.937 0 1.599-.477 1.934-1.064a1.86 1.86 0 0 0 .254-.912c0-.152-.023-.312-.077-.464.201-.263.38-.578.488-.901.11-.33.172-.762.004-1.149.069-.13.12-.269.159-.403.077-.27.113-.568.113-.857 0-.288-.036-.585-.113-.856a2.144 2.144 0 0 0-.138-.362 1.9 1.9 0 0 0 .234-1.734c-.206-.592-.682-1.1-1.2-1.272-.847-.282-1.803-.276-2.516-.211a9.84 9.84 0 0 0-.443.05 9.365 9.365 0 0 0-.062-4.509A1.38 1.38 0 0 0 9.125.111L8.864.046zM11.5 14.721H8c-.51 0-.863-.069-1.14-.164-.281-.097-.506-.228-.776-.393l-.04-.024c-.555-.339-1.198-.731-2.49-.868-.333-.036-.554-.29-.554-.55V8.72c0-.254.226-.543.62-.65 1.095-.3 1.977-.996 2.614-1.708.635-.71 1.064-1.475 1.238-1.978.243-.7.407-1.768.482-2.85.025-.362.36-.594.667-.518l.262.066c.16.04.258.143.288.255a8.34 8.34 0 0 1-.145 4.725.5.5 0 0 0 .595.644l.003-.001.014-.003.058-.014a8.908 8.908 0 0 1 1.036-.157c.663-.06 1.457-.054 2.11.164.175.058.45.3.57.65.107.308.087.67-.266 1.022l-.353.353.353.354c.043.043.105.141.154.315.048.167.075.37.075.581 0 .212-.027.414-.075.582-.05.174-.111.272-.154.315l-.353.353.353.354c.047.047.109.177.005.488a2.224 2.224 0 0 1-.505.805l-.353.353.353.354c.006.005.041.05.041.17a.866.866 0 0 1-.121.416c-.165.288-.503.56-1.066.56z"/>
                                                </svg>
                                                <svg onclick= "likecomment({{ comment.id }}, false)" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hand-thumbs-down-fill" viewBox="0 0 16 16">
                                                    <path d="M6.956 14.534c.065.936.952 1.659 1.908 1.42l.261-.065a1.378 1.378 0 0 0 1.012-.965c.22-.816.533-2.512.062-4.51.136.02.285.037.443.051.713.065 1.669.071 2.516-.211.518-.173.994-.68 1.2-1.272a1.896 1.896 0 0 0-.234-1.734c.058-.118.103-.242.138-.362.077-.27.113-.568.113-.856 0-.29-.036-.586-.113-.857a2.094 2.094 0 0 0-.16-.403c.169-.387.107-.82-.003-1.149a3.162 3.162 0 0 0-.488-.9c.054-.153.076-.313.076-.465a1.86 1.86 0 0 0-.253-.912C13.1.757 12.437.28 11.5.28H8c-.605 0-1.07.08-1.466.217a4.823 4.823 0 0 0-.97.485l-.048.029c-.504.308-.999.61-2.068.723C2.682 1.815 2 2.434 2 3.279v4c0 .851.685 1.433 1.357 1.616.849.232 1.574.787 2.132 1.41.56.626.914 1.28 1.039 1.638.199.575.356 1.54.428 2.591z"/>
                                                </svg>
                                            <span id="dislike_count_container{{comment.id}}">{{comment.dislike_count}}</span>
                                        </div>
                                    {% elif commentlike.condition == None and commentlike.user == request.user %}
                                        <div id="svg_comment{{ comment.id }}">
                                            <span id="like_count_container{{comment.id}}">{{comment.like_count}}</span>
                                                <svg onclick= "likecomment({{ comment.id }})" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hand-thumbs-up" viewBox="0 0 16 16">
                                                    <path d="M8.864.046C7.908-.193 7.02.53 6.956 1.466c-.072 1.051-.23 2.016-.428 2.59-.125.36-.479 1.013-1.04 1.639-.557.623-1.282 1.178-2.131 1.41C2.685 7.288 2 7.87 2 8.72v4.001c0 .845.682 1.464 1.448 1.545 1.07.114 1.564.415 2.068.723l.048.03c.272.165.578.348.97.484.397.136.861.217 1.466.217h3.5c.937 0 1.599-.477 1.934-1.064a1.86 1.86 0 0 0 .254-.912c0-.152-.023-.312-.077-.464.201-.263.38-.578.488-.901.11-.33.172-.762.004-1.149.069-.13.12-.269.159-.403.077-.27.113-.568.113-.857 0-.288-.036-.585-.113-.856a2.144 2.144 0 0 0-.138-.362 1.9 1.9 0 0 0 .234-1.734c-.206-.592-.682-1.1-1.2-1.272-.847-.282-1.803-.276-2.516-.211a9.84 9.84 0 0 0-.443.05 9.365 9.365 0 0 0-.062-4.509A1.38 1.38 0 0 0 9.125.111L8.864.046zM11.5 14.721H8c-.51 0-.863-.069-1.14-.164-.281-.097-.506-.228-.776-.393l-.04-.024c-.555-.339-1.198-.731-2.49-.868-.333-.036-.554-.29-.554-.55V8.72c0-.254.226-.543.62-.65 1.095-.3 1.977-.996 2.614-1.708.635-.71 1.064-1.475 1.238-1.978.243-.7.407-1.768.482-2.85.025-.362.36-.594.667-.518l.262.066c.16.04.258.143.288.255a8.34 8.34 0 0 1-.145 4.725.5.5 0 0 0 .595.644l.003-.001.014-.003.058-.014a8.908 8.908 0 0 1 1.036-.157c.663-.06 1.457-.054 2.11.164.175.058.45.3.57.65.107.308.087.67-.266 1.022l-.353.353.353.354c.043.043.105.141.154.315.048.167.075.37.075.581 0 .212-.027.414-.075.582-.05.174-.111.272-.154.315l-.353.353.353.354c.047.047.109.177.005.488a2.224 2.224 0 0 1-.505.805l-.353.353.353.354c.006.005.041.05.041.17a.866.866 0 0 1-.121.416c-.165.288-.503.56-1.066.56z"/>
                                                </svg>
                                                <svg onclick= "likecomment({{ comment.id }}, false)" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hand-thumbs-down" viewBox="0 0 16 16">
                                                    <path d="M8.864 15.674c-.956.24-1.843-.484-1.908-1.42-.072-1.05-.23-2.015-.428-2.59-.125-.36-.479-1.012-1.04-1.638-.557-.624-1.282-1.179-2.131-1.41C2.685 8.432 2 7.85 2 7V3c0-.845.682-1.464 1.448-1.546 1.07-.113 1.564-.415 2.068-.723l.048-.029c.272-.166.578-.349.97-.484C6.931.08 7.395 0 8 0h3.5c.937 0 1.599.478 1.934 1.064.164.287.254.607.254.913 0 .152-.023.312-.077.464.201.262.38.577.488.9.11.33.172.762.004 1.15.069.13.12.268.159.403.077.27.113.567.113.856 0 .289-.036.586-.113.856-.035.12-.08.244-.138.363.394.571.418 1.2.234 1.733-.206.592-.682 1.1-1.2 1.272-.847.283-1.803.276-2.516.211a9.877 9.877 0 0 1-.443-.05 9.364 9.364 0 0 1-.062 4.51c-.138.508-.55.848-1.012.964l-.261.065zM11.5 1H8c-.51 0-.863.068-1.14.163-.281.097-.506.229-.776.393l-.04.025c-.555.338-1.198.73-2.49.868-.333.035-.554.29-.554.55V7c0 .255.226.543.62.65 1.095.3 1.977.997 2.614 1.709.635.71 1.064 1.475 1.238 1.977.243.7.407 1.768.482 2.85.025.362.36.595.667.518l.262-.065c.16-.04.258-.144.288-.255a8.34 8.34 0 0 0-.145-4.726.5.5 0 0 1 .595-.643h.003l.014.004.058.013a8.912 8.912 0 0 0 1.036.157c.663.06 1.457.054 2.11-.163.175-.059.45-.301.57-.651.107-.308.087-.67-.266-1.021L12.793 7l.353-.354c.043-.042.105-.14.154-.315.048-.167.075-.37.075-.581 0-.211-.027-.414-.075-.581-.05-.174-.111-.273-.154-.315l-.353-.354.353-.354c.047-.047.109-.176.005-.488a2.224 2.224 0 0 0-.505-.804l-.353-.354.353-.354c.006-.005.041-.05.041-.17a.866.866 0 0 0-.121-.415C12.4 1.272 12.063 1 11.5 1z"/>
                                                </svg>
                                            <span id="dislike_count_container{{comment.id}}">{{comment.dislike_count}}</span>
                                        </div>
                                    {% endif %}
                                {% endif %}
                            {% endfor %}
{#                        {%  else %}#}
{#                            <div id="svg_comment{{ comment.id }}">#}
{#                                <span id="like_count_container{{comment.id}}">{{comment.like_count}}</span>#}
{#                                    <svg onclick= "likecomment({{ comment.id }})" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hand-thumbs-up" viewBox="0 0 16 16">#}
{#                                        <path d="M8.864.046C7.908-.193 7.02.53 6.956 1.466c-.072 1.051-.23 2.016-.428 2.59-.125.36-.479 1.013-1.04 1.639-.557.623-1.282 1.178-2.131 1.41C2.685 7.288 2 7.87 2 8.72v4.001c0 .845.682 1.464 1.448 1.545 1.07.114 1.564.415 2.068.723l.048.03c.272.165.578.348.97.484.397.136.861.217 1.466.217h3.5c.937 0 1.599-.477 1.934-1.064a1.86 1.86 0 0 0 .254-.912c0-.152-.023-.312-.077-.464.201-.263.38-.578.488-.901.11-.33.172-.762.004-1.149.069-.13.12-.269.159-.403.077-.27.113-.568.113-.857 0-.288-.036-.585-.113-.856a2.144 2.144 0 0 0-.138-.362 1.9 1.9 0 0 0 .234-1.734c-.206-.592-.682-1.1-1.2-1.272-.847-.282-1.803-.276-2.516-.211a9.84 9.84 0 0 0-.443.05 9.365 9.365 0 0 0-.062-4.509A1.38 1.38 0 0 0 9.125.111L8.864.046zM11.5 14.721H8c-.51 0-.863-.069-1.14-.164-.281-.097-.506-.228-.776-.393l-.04-.024c-.555-.339-1.198-.731-2.49-.868-.333-.036-.554-.29-.554-.55V8.72c0-.254.226-.543.62-.65 1.095-.3 1.977-.996 2.614-1.708.635-.71 1.064-1.475 1.238-1.978.243-.7.407-1.768.482-2.85.025-.362.36-.594.667-.518l.262.066c.16.04.258.143.288.255a8.34 8.34 0 0 1-.145 4.725.5.5 0 0 0 .595.644l.003-.001.014-.003.058-.014a8.908 8.908 0 0 1 1.036-.157c.663-.06 1.457-.054 2.11.164.175.058.45.3.57.65.107.308.087.67-.266 1.022l-.353.353.353.354c.043.043.105.141.154.315.048.167.075.37.075.581 0 .212-.027.414-.075.582-.05.174-.111.272-.154.315l-.353.353.353.354c.047.047.109.177.005.488a2.224 2.224 0 0 1-.505.805l-.353.353.353.354c.006.005.041.05.041.17a.866.866 0 0 1-.121.416c-.165.288-.503.56-1.066.56z"/>#}
{#                                    </svg>#}
{#                                    <svg onclick= "likecomment({{ comment.id }}, false)" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hand-thumbs-down" viewBox="0 0 16 16">#}
{#                                        <path d="M8.864 15.674c-.956.24-1.843-.484-1.908-1.42-.072-1.05-.23-2.015-.428-2.59-.125-.36-.479-1.012-1.04-1.638-.557-.624-1.282-1.179-2.131-1.41C2.685 8.432 2 7.85 2 7V3c0-.845.682-1.464 1.448-1.546 1.07-.113 1.564-.415 2.068-.723l.048-.029c.272-.166.578-.349.97-.484C6.931.08 7.395 0 8 0h3.5c.937 0 1.599.478 1.934 1.064.164.287.254.607.254.913 0 .152-.023.312-.077.464.201.262.38.577.488.9.11.33.172.762.004 1.15.069.13.12.268.159.403.077.27.113.567.113.856 0 .289-.036.586-.113.856-.035.12-.08.244-.138.363.394.571.418 1.2.234 1.733-.206.592-.682 1.1-1.2 1.272-.847.283-1.803.276-2.516.211a9.877 9.877 0 0 1-.443-.05 9.364 9.364 0 0 1-.062 4.51c-.138.508-.55.848-1.012.964l-.261.065zM11.5 1H8c-.51 0-.863.068-1.14.163-.281.097-.506.229-.776.393l-.04.025c-.555.338-1.198.73-2.49.868-.333.035-.554.29-.554.55V7c0 .255.226.543.62.65 1.095.3 1.977.997 2.614 1.709.635.71 1.064 1.475 1.238 1.977.243.7.407 1.768.482 2.85.025.362.36.595.667.518l.262-.065c.16-.04.258-.144.288-.255a8.34 8.34 0 0 0-.145-4.726.5.5 0 0 1 .595-.643h.003l.014.004.058.013a8.912 8.912 0 0 0 1.036.157c.663.06 1.457.054 2.11-.163.175-.059.45-.301.57-.651.107-.308.087-.67-.266-1.021L12.793 7l.353-.354c.043-.042.105-.14.154-.315.048-.167.075-.37.075-.581 0-.211-.027-.414-.075-.581-.05-.174-.111-.273-.154-.315l-.353-.354.353-.354c.047-.047.109-.176.005-.488a2.224 2.224 0 0 0-.505-.804l-.353-.354.353-.354c.006-.005.041-.05.041-.17a.866.866 0 0 0-.121-.415C12.4 1.272 12.063 1 11.5 1z"/>#}
{#                                    </svg>#}
{#                                <span id="dislike_count_container{{comment.id}}">{{comment.dislike_count}}</span>#}
{#                            </div>#}
{#                        {% endif %}#}
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</div>
<div id="Paris" class="tabcontent">
  <h3>مشخصات</h3>
  <p></p>
<div>
{% if productmeta is not none %}
    {% for item in productmeta %}
        <div class="container d-flex justify-content-center border">
            <div class="col-4 border d-flex justify-content-center bg-primary text-white h4">{{ item.label }} :</div>
            <div class="col-8 border justify-content-center h4 bg-light">{{ item.value }}</div>
        </div>
    {% endfor %}
{% else %}
    <p>برای این کالا مشخصاتی وارد نشده است.</p>
{% endif %}
</div>
</div>

<div id="Tokyo" class="tabcontent">
    <h3>نقد و بررسی:</h3>
    {% if comments.count > 0  %}
        <p>تعداد {{ comments.count }} نفر در مورد این محصول نظر داده اند که بطور
            میانگین این محصول دارای ارزش            {{ average_rate }} می باشد</p>
    {% else %}
        <p>در مورد این کالا هنوز نظری ثبت نشده است</p>
    {% endif %}
</div>
{% endblock %}

{% block javascript %}
    <script src="{% static 'js/gallery.js'%}"></script>
    <script src="{% static 'js/zoombox.js' %}"></script> {# baraye galery zoom #}
    <script src="{% static 'js/blowup.min.js'%}"></script>
    <script src="{% static 'js/blowup.js'%}"></script>
    <script src="{% static 'js/BUP.js'%}"></script> {# baraye zoom kardan aks #}
    <script src="{% static 'js/jquery.rollNumber.js'%}"></script>


<script>
{#$('.example').BUP(null, 1);#}
$('.example').BUP(null, 0.5);
$('.example').BUP(null, 1.5);
</script>


<script>
  $('a.zoombox').zoombox();
</script>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-36251023-1']);
  _gaq.push(['_setDomainName', 'jqueryscript.net']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

      <script>
        function likecomment(commentID,condition = true) {
            const data = JSON.stringify({comment_id:commentID,condition})
            $.ajax({
                type: "post",
                url: "{% url 'comment_like' %}",
                data: data,
                success: function (response) {
                    const data = JSON.parse(response)
                    const cell1 = $('#like_count_container' + data.commentID);
                    const cell2 = $('#dislike_count_container' + data.commentID);
                    const cell3 = $('#svg_comment' + data.commentID);

                    $(cell1).text(data.like_count);
                    $(cell2).text(data.dislike_count);
                    if ( data.condition ) {
                        $(cell3).html(`
                     <div id="svg_comment${ data.commentID }">
                                        <span>${data.like_count}</span>
                                            <svg onclick= "likecomment(${ data.commentID })" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hand-thumbs-up-fill" viewBox="0 0 16 16">
                                                <path d="M6.956 1.745C7.021.81 7.908.087 8.864.325l.261.066c.463.116.874.456 1.012.964.22.817.533 2.512.062 4.51a9.84 9.84 0 0 1 .443-.05c.713-.065 1.669-.072 2.516.21.518.173.994.68 1.2 1.273.184.532.16 1.162-.234 1.733.058.119.103.242.138.363.077.27.113.567.113.856 0 .289-.036.586-.113.856-.039.135-.09.273-.16.404.169.387.107.819-.003 1.148a3.162 3.162 0 0 1-.488.9c.054.153.076.313.076.465 0 .306-.089.626-.253.912C13.1 15.522 12.437 16 11.5 16H8c-.605 0-1.07-.081-1.466-.218a4.826 4.826 0 0 1-.97-.484l-.048-.03c-.504-.307-.999-.609-2.068-.722C2.682 14.464 2 13.846 2 13V9c0-.85.685-1.432 1.357-1.616.849-.231 1.574-.786 2.132-1.41.56-.626.914-1.279 1.039-1.638.199-.575.356-1.54.428-2.59z"/>
                                            </svg>
                                            <svg onclick= "likecomment(${ data.commentID }, false)" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hand-thumbs-down" viewBox="0 0 16 16">
                                                <path d="M8.864 15.674c-.956.24-1.843-.484-1.908-1.42-.072-1.05-.23-2.015-.428-2.59-.125-.36-.479-1.012-1.04-1.638-.557-.624-1.282-1.179-2.131-1.41C2.685 8.432 2 7.85 2 7V3c0-.845.682-1.464 1.448-1.546 1.07-.113 1.564-.415 2.068-.723l.048-.029c.272-.166.578-.349.97-.484C6.931.08 7.395 0 8 0h3.5c.937 0 1.599.478 1.934 1.064.164.287.254.607.254.913 0 .152-.023.312-.077.464.201.262.38.577.488.9.11.33.172.762.004 1.15.069.13.12.268.159.403.077.27.113.567.113.856 0 .289-.036.586-.113.856-.035.12-.08.244-.138.363.394.571.418 1.2.234 1.733-.206.592-.682 1.1-1.2 1.272-.847.283-1.803.276-2.516.211a9.877 9.877 0 0 1-.443-.05 9.364 9.364 0 0 1-.062 4.51c-.138.508-.55.848-1.012.964l-.261.065zM11.5 1H8c-.51 0-.863.068-1.14.163-.281.097-.506.229-.776.393l-.04.025c-.555.338-1.198.73-2.49.868-.333.035-.554.29-.554.55V7c0 .255.226.543.62.65 1.095.3 1.977.997 2.614 1.709.635.71 1.064 1.475 1.238 1.977.243.7.407 1.768.482 2.85.025.362.36.595.667.518l.262-.065c.16-.04.258-.144.288-.255a8.34 8.34 0 0 0-.145-4.726.5.5 0 0 1 .595-.643h.003l.014.004.058.013a8.912 8.912 0 0 0 1.036.157c.663.06 1.457.054 2.11-.163.175-.059.45-.301.57-.651.107-.308.087-.67-.266-1.021L12.793 7l.353-.354c.043-.042.105-.14.154-.315.048-.167.075-.37.075-.581 0-.211-.027-.414-.075-.581-.05-.174-.111-.273-.154-.315l-.353-.354.353-.354c.047-.047.109-.176.005-.488a2.224 2.224 0 0 0-.505-.804l-.353-.354.353-.354c.006-.005.041-.05.041-.17a.866.866 0 0 0-.121-.415C12.4 1.272 12.063 1 11.5 1z"/>
                                            </svg>
                                        <span>${data.dislike_count}</span>
                                       </div>
                                            `)
                                        }
                     if ( data.condition == false ) {
                                            $(cell3).html(`
                                        <div id="svg_comment${ data.commentID }">
                                        <span id="like_count_container${ data.commentID }">${data.like_count}</span>
                                            <svg onclick= "likecomment(${ data.commentID })" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hand-thumbs-up" viewBox="0 0 16 16">
                                                <path d="M8.864.046C7.908-.193 7.02.53 6.956 1.466c-.072 1.051-.23 2.016-.428 2.59-.125.36-.479 1.013-1.04 1.639-.557.623-1.282 1.178-2.131 1.41C2.685 7.288 2 7.87 2 8.72v4.001c0 .845.682 1.464 1.448 1.545 1.07.114 1.564.415 2.068.723l.048.03c.272.165.578.348.97.484.397.136.861.217 1.466.217h3.5c.937 0 1.599-.477 1.934-1.064a1.86 1.86 0 0 0 .254-.912c0-.152-.023-.312-.077-.464.201-.263.38-.578.488-.901.11-.33.172-.762.004-1.149.069-.13.12-.269.159-.403.077-.27.113-.568.113-.857 0-.288-.036-.585-.113-.856a2.144 2.144 0 0 0-.138-.362 1.9 1.9 0 0 0 .234-1.734c-.206-.592-.682-1.1-1.2-1.272-.847-.282-1.803-.276-2.516-.211a9.84 9.84 0 0 0-.443.05 9.365 9.365 0 0 0-.062-4.509A1.38 1.38 0 0 0 9.125.111L8.864.046zM11.5 14.721H8c-.51 0-.863-.069-1.14-.164-.281-.097-.506-.228-.776-.393l-.04-.024c-.555-.339-1.198-.731-2.49-.868-.333-.036-.554-.29-.554-.55V8.72c0-.254.226-.543.62-.65 1.095-.3 1.977-.996 2.614-1.708.635-.71 1.064-1.475 1.238-1.978.243-.7.407-1.768.482-2.85.025-.362.36-.594.667-.518l.262.066c.16.04.258.143.288.255a8.34 8.34 0 0 1-.145 4.725.5.5 0 0 0 .595.644l.003-.001.014-.003.058-.014a8.908 8.908 0 0 1 1.036-.157c.663-.06 1.457-.054 2.11.164.175.058.45.3.57.65.107.308.087.67-.266 1.022l-.353.353.353.354c.043.043.105.141.154.315.048.167.075.37.075.581 0 .212-.027.414-.075.582-.05.174-.111.272-.154.315l-.353.353.353.354c.047.047.109.177.005.488a2.224 2.224 0 0 1-.505.805l-.353.353.353.354c.006.005.041.05.041.17a.866.866 0 0 1-.121.416c-.165.288-.503.56-1.066.56z"/>
                                            </svg>
                                            <svg onclick= "likecomment(${ data.commentID }, false)" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hand-thumbs-down-fill" viewBox="0 0 16 16">
                                                <path d="M6.956 14.534c.065.936.952 1.659 1.908 1.42l.261-.065a1.378 1.378 0 0 0 1.012-.965c.22-.816.533-2.512.062-4.51.136.02.285.037.443.051.713.065 1.669.071 2.516-.211.518-.173.994-.68 1.2-1.272a1.896 1.896 0 0 0-.234-1.734c.058-.118.103-.242.138-.362.077-.27.113-.568.113-.856 0-.29-.036-.586-.113-.857a2.094 2.094 0 0 0-.16-.403c.169-.387.107-.82-.003-1.149a3.162 3.162 0 0 0-.488-.9c.054-.153.076-.313.076-.465a1.86 1.86 0 0 0-.253-.912C13.1.757 12.437.28 11.5.28H8c-.605 0-1.07.08-1.466.217a4.823 4.823 0 0 0-.97.485l-.048.029c-.504.308-.999.61-2.068.723C2.682 1.815 2 2.434 2 3.279v4c0 .851.685 1.433 1.357 1.616.849.232 1.574.787 2.132 1.41.56.626.914 1.28 1.039 1.638.199.575.356 1.54.428 2.591z"/>
                                            </svg>
                                        <span id="dislike_count_container${ data.commentID }">${data.dislike_count}</span>
                                        </div>
                                            `)
                                        }
                      if ( data.condition == null ) {
                                            $(cell3).html(`
                                        <div id="svg_comment${ data.commentID }">
                                        <span id="like_count_container${ data.commentID }">${data.like_count}</span>
                                            <svg onclick= "likecomment(${ data.commentID })" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hand-thumbs-up" viewBox="0 0 16 16">
                                            <path d="M8.864.046C7.908-.193 7.02.53 6.956 1.466c-.072 1.051-.23 2.016-.428 2.59-.125.36-.479 1.013-1.04 1.639-.557.623-1.282 1.178-2.131 1.41C2.685 7.288 2 7.87 2 8.72v4.001c0 .845.682 1.464 1.448 1.545 1.07.114 1.564.415 2.068.723l.048.03c.272.165.578.348.97.484.397.136.861.217 1.466.217h3.5c.937 0 1.599-.477 1.934-1.064a1.86 1.86 0 0 0 .254-.912c0-.152-.023-.312-.077-.464.201-.263.38-.578.488-.901.11-.33.172-.762.004-1.149.069-.13.12-.269.159-.403.077-.27.113-.568.113-.857 0-.288-.036-.585-.113-.856a2.144 2.144 0 0 0-.138-.362 1.9 1.9 0 0 0 .234-1.734c-.206-.592-.682-1.1-1.2-1.272-.847-.282-1.803-.276-2.516-.211a9.84 9.84 0 0 0-.443.05 9.365 9.365 0 0 0-.062-4.509A1.38 1.38 0 0 0 9.125.111L8.864.046zM11.5 14.721H8c-.51 0-.863-.069-1.14-.164-.281-.097-.506-.228-.776-.393l-.04-.024c-.555-.339-1.198-.731-2.49-.868-.333-.036-.554-.29-.554-.55V8.72c0-.254.226-.543.62-.65 1.095-.3 1.977-.996 2.614-1.708.635-.71 1.064-1.475 1.238-1.978.243-.7.407-1.768.482-2.85.025-.362.36-.594.667-.518l.262.066c.16.04.258.143.288.255a8.34 8.34 0 0 1-.145 4.725.5.5 0 0 0 .595.644l.003-.001.014-.003.058-.014a8.908 8.908 0 0 1 1.036-.157c.663-.06 1.457-.054 2.11.164.175.058.45.3.57.65.107.308.087.67-.266 1.022l-.353.353.353.354c.043.043.105.141.154.315.048.167.075.37.075.581 0 .212-.027.414-.075.582-.05.174-.111.272-.154.315l-.353.353.353.354c.047.047.109.177.005.488a2.224 2.224 0 0 1-.505.805l-.353.353.353.354c.006.005.041.05.041.17a.866.866 0 0 1-.121.416c-.165.288-.503.56-1.066.56z"/>
                                            </svg>
                                            <svg onclick= "likecomment(${ data.commentID }, false)" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hand-thumbs-down" viewBox="0 0 16 16">
                                            <path d="M8.864 15.674c-.956.24-1.843-.484-1.908-1.42-.072-1.05-.23-2.015-.428-2.59-.125-.36-.479-1.012-1.04-1.638-.557-.624-1.282-1.179-2.131-1.41C2.685 8.432 2 7.85 2 7V3c0-.845.682-1.464 1.448-1.546 1.07-.113 1.564-.415 2.068-.723l.048-.029c.272-.166.578-.349.97-.484C6.931.08 7.395 0 8 0h3.5c.937 0 1.599.478 1.934 1.064.164.287.254.607.254.913 0 .152-.023.312-.077.464.201.262.38.577.488.9.11.33.172.762.004 1.15.069.13.12.268.159.403.077.27.113.567.113.856 0 .289-.036.586-.113.856-.035.12-.08.244-.138.363.394.571.418 1.2.234 1.733-.206.592-.682 1.1-1.2 1.272-.847.283-1.803.276-2.516.211a9.877 9.877 0 0 1-.443-.05 9.364 9.364 0 0 1-.062 4.51c-.138.508-.55.848-1.012.964l-.261.065zM11.5 1H8c-.51 0-.863.068-1.14.163-.281.097-.506.229-.776.393l-.04.025c-.555.338-1.198.73-2.49.868-.333.035-.554.29-.554.55V7c0 .255.226.543.62.65 1.095.3 1.977.997 2.614 1.709.635.71 1.064 1.475 1.238 1.977.243.7.407 1.768.482 2.85.025.362.36.595.667.518l.262-.065c.16-.04.258-.144.288-.255a8.34 8.34 0 0 0-.145-4.726.5.5 0 0 1 .595-.643h.003l.014.004.058.013a8.912 8.912 0 0 0 1.036.157c.663.06 1.457.054 2.11-.163.175-.059.45-.301.57-.651.107-.308.087-.67-.266-1.021L12.793 7l.353-.354c.043-.042.105-.14.154-.315.048-.167.075-.37.075-.581 0-.211-.027-.414-.075-.581-.05-.174-.111-.273-.154-.315l-.353-.354.353-.354c.047-.047.109-.176.005-.488a2.224 2.224 0 0 0-.505-.804l-.353-.354.353-.354c.006-.005.041-.05.041-.17a.866.866 0 0 0-.121-.415C12.4 1.272 12.063 1 11.5 1z"/>
                                            </svg>
                                        <span id="dislike_count_container${ data.commentID }">${data.dislike_count}</span>
                                        </div>
                                            `)
                                        }
                }
            });
        }
    </script>

   <script>
      let i = 1
      var str = ""
        function star_rate(num) {
          console.log(num)
            while(i<= num){
              str += "   <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"yellow\" class=\"bi bi-star-fill\" viewBox=\"0 0 16 16\">\n" +
                     "        <path d=\"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z\"/>\n" +
                     "   </svg>"
                i ++
            }
            let b = 5 - num
            let j = 1
            while(j<=b){
                str += " <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"yellow\" class=\"bi bi-star\" viewBox=\"0 0 16 16\">\n" +
                    "                                    <path d=\"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.523-3.356c.329-.314.158-.888-.283-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767l-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288l1.847-3.658 1.846 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.564.564 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z\"/>\n" +
                    "                                </svg>"
                j ++
            }
            console.log(str)
            return str
        }
        document.getElementById("form_comment").addEventListener("submit",function (event) {
            event.preventDefault();
            const text = $('#id_text').val();
            const rate = $('#starsInput').val();
            console.log(text,rate)
            const data = JSON.stringify({text,rate,product_id:{{product.id}}})
            console.log(data)
            $.ajax({
                type: "post",
                url: "{% url 'create_comment' %}",
                data: data,
                success: function (response) {
                    const data = JSON.parse(response);
                    console.log(data);
                    {#window.location.reload();#}
                    $('#comment-div').prepend( `
<div class="container d-flex flex-wrap mt-4 bg-light rounded shadow">
                <div class="col-8 bg-info">
                        ${ data.f_name } :
               </div>
               <div class="col-4 bg-info">${ data.created_at }</div>
               <p class="col-12">${ data.text }</p>
               <div class="col-10 bg-secondary">
                     ${star_rate(parseInt(data.rate))}
               </div>
               <div class="d-flex col-2 justify-content-center">
                                <div id="svg_comment${ data.comment_id }">
                                <span id="like_count_container${ data.comment_id }">${data.like_count}</span>
                                    <svg onclick="likecomment(${ data.comment_id })" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hand-thumbs-up" viewBox="0 0 16 16">
                                    <path d="M8.864.046C7.908-.193 7.02.53 6.956 1.466c-.072 1.051-.23 2.016-.428 2.59-.125.36-.479 1.013-1.04 1.639-.557.623-1.282 1.178-2.131 1.41C2.685 7.288 2 7.87 2 8.72v4.001c0 .845.682 1.464 1.448 1.545 1.07.114 1.564.415 2.068.723l.048.03c.272.165.578.348.97.484.397.136.861.217 1.466.217h3.5c.937 0 1.599-.477 1.934-1.064a1.86 1.86 0 0 0 .254-.912c0-.152-.023-.312-.077-.464.201-.263.38-.578.488-.901.11-.33.172-.762.004-1.149.069-.13.12-.269.159-.403.077-.27.113-.568.113-.857 0-.288-.036-.585-.113-.856a2.144 2.144 0 0 0-.138-.362 1.9 1.9 0 0 0 .234-1.734c-.206-.592-.682-1.1-1.2-1.272-.847-.282-1.803-.276-2.516-.211a9.84 9.84 0 0 0-.443.05 9.365 9.365 0 0 0-.062-4.509A1.38 1.38 0 0 0 9.125.111L8.864.046zM11.5 14.721H8c-.51 0-.863-.069-1.14-.164-.281-.097-.506-.228-.776-.393l-.04-.024c-.555-.339-1.198-.731-2.49-.868-.333-.036-.554-.29-.554-.55V8.72c0-.254.226-.543.62-.65 1.095-.3 1.977-.996 2.614-1.708.635-.71 1.064-1.475 1.238-1.978.243-.7.407-1.768.482-2.85.025-.362.36-.594.667-.518l.262.066c.16.04.258.143.288.255a8.34 8.34 0 0 1-.145 4.725.5.5 0 0 0 .595.644l.003-.001.014-.003.058-.014a8.908 8.908 0 0 1 1.036-.157c.663-.06 1.457-.054 2.11.164.175.058.45.3.57.65.107.308.087.67-.266 1.022l-.353.353.353.354c.043.043.105.141.154.315.048.167.075.37.075.581 0 .212-.027.414-.075.582-.05.174-.111.272-.154.315l-.353.353.353.354c.047.047.109.177.005.488a2.224 2.224 0 0 1-.505.805l-.353.353.353.354c.006.005.041.05.041.17a.866.866 0 0 1-.121.416c-.165.288-.503.56-1.066.56z"></path>
                                    </svg>
                                    <svg onclick="likecomment(${ data.comment_id }, false)" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hand-thumbs-down" viewBox="0 0 16 16">
                                    <path d="M8.864 15.674c-.956.24-1.843-.484-1.908-1.42-.072-1.05-.23-2.015-.428-2.59-.125-.36-.479-1.012-1.04-1.638-.557-.624-1.282-1.179-2.131-1.41C2.685 8.432 2 7.85 2 7V3c0-.845.682-1.464 1.448-1.546 1.07-.113 1.564-.415 2.068-.723l.048-.029c.272-.166.578-.349.97-.484C6.931.08 7.395 0 8 0h3.5c.937 0 1.599.478 1.934 1.064.164.287.254.607.254.913 0 .152-.023.312-.077.464.201.262.38.577.488.9.11.33.172.762.004 1.15.069.13.12.268.159.403.077.27.113.567.113.856 0 .289-.036.586-.113.856-.035.12-.08.244-.138.363.394.571.418 1.2.234 1.733-.206.592-.682 1.1-1.2 1.272-.847.283-1.803.276-2.516.211a9.877 9.877 0 0 1-.443-.05 9.364 9.364 0 0 1-.062 4.51c-.138.508-.55.848-1.012.964l-.261.065zM11.5 1H8c-.51 0-.863.068-1.14.163-.281.097-.506.229-.776.393l-.04.025c-.555.338-1.198.73-2.49.868-.333.035-.554.29-.554.55V7c0 .255.226.543.62.65 1.095.3 1.977.997 2.614 1.709.635.71 1.064 1.475 1.238 1.977.243.7.407 1.768.482 2.85.025.362.36.595.667.518l.262-.065c.16-.04.258-.144.288-.255a8.34 8.34 0 0 0-.145-4.726.5.5 0 0 1 .595-.643h.003l.014.004.058.013a8.912 8.912 0 0 0 1.036.157c.663.06 1.457.054 2.11-.163.175-.059.45-.301.57-.651.107-.308.087-.67-.266-1.021L12.793 7l.353-.354c.043-.042.105-.14.154-.315.048-.167.075-.37.075-.581 0-.211-.027-.414-.075-.581-.05-.174-.111-.273-.154-.315l-.353-.354.353-.354c.047-.047.109-.176.005-.488a2.224 2.224 0 0 0-.505-.804l-.353-.354.353-.354c.006-.005.041-.05.041-.17a.866.866 0 0 0-.121-.415C12.4 1.272 12.063 1 11.5 1z"></path>
                                    </svg>
                                <span id="dislike_count_container${ data.comment_id }">${data.dislike_count}</span>
                                </div>
               </div>
           </div>`
                    );
                },
            });
        }, false);
    </script>
<script src="{% static 'js/rating.js' %}"></script>
<script>
    $("#review").rating({
        "value": 2,
        "click": function (e) {
            console.log(e);
            $("#starsInput").val(e.stars);
        }
    });

    $("#10starsReview").rating({
        "stars": 10,
        "click": function (e) {
            console.log(e);
            $("#10starsInput").val(e.stars);
        }
    });

    $("#customstarsReview").rating({
        "emptyStar": "far fa-play-circle",
        "filledStar": "fas fa-play-circle",
        "color": "#4c71ff",
        "click": function (e) {
            console.log(e);
            $("#customstarsInput").val(e.stars);
        }
    });

    $("#halfstarsReview").rating({
        "half": true,
        "click": function (e) {
            console.log(e);
            $("#halfstarsInput").val(e.stars);
        }
    });

    $("#unrealisticReview").rating({
        value: 3,
        stars: 7,
        emptyStar: "far fa-arrow-alt-circle-left",
        halfStar: "far fa-angry",
        filledStar: "fas fa-arrow-alt-circle-right",
        color: "#ff3ef9",
        half: true,
        click: function (e) {
            console.log(e);
            $("#unrealisticInput").val(e.stars);
        }
    });
</script>
    <script>
        function add_product(shpID) {
            const data = JSON.stringify({shp_id:shpID})
            $.ajax({
                type: "post",
                url: "{% url 'add_product' %}",
                data: data,
                success: function (response) {
                    const data = JSON.parse(response)
                    {#const cell1 = $('#like_count_container' + data.commentID);#}
                    {#const cell2 = $('#dislike_count_container' + data.commentID);#}
                    {#$(cell1).text(data.like_count);#}
                    {#$(cell2).text(data.dislike_count);#}
                    window.location.reload();
                    $.Toast("kalabuy","کالا به سبد خرید اضاقه شد","success");
                    {% comment %} $('"#like_count_container').text(data.like_count);
                    $('#dislike_count_container').text(data.dislike_count); {% endcomment %}
                }
            });
        }
    </script>


<script>
function openCity(evt, cityName) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(cityName).style.display = "block";
  evt.currentTarget.className += " active";
}

// Get the element with id="defaultOpen" and click on it
document.getElementById("defaultOpen").click();
</script>

<script>
function scrollCity(evt, cityName) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(cityName).style.display = "block";
  evt.currentTarget.className += " active";
      $('html,body').animate({
        scrollTop: $("#Paris").offset().top-280},
        'slow');
}

// Get the element with id="defaultOpen" and click on it
document.getElementById("defaultOpen").click();
</script>


    <script>
        function favorite_add(shop_productID,favorite = true) {
            const data = JSON.stringify({shop_product_id:shop_productID,favorite})
            $.ajax({
                type: "post",
                url: "{% url 'favorite_add' %}",
                data: data,
                success: function (response) {
                    const data = JSON.parse(response)
                    {#const cell1 = $('#like_count_container' + data.commentID);#}
                    {#const cell2 = $('#dislike_count_container' + data.commentID);#}
                    {#$(cell1).text(data.like_count);#}
                    {#$(cell2).text(data.dislike_count);#}
                    faver = data.favor
                    if( faver == 0)
                        $('#favorite').html(`
                        <svg onclick="favorite_add(${ data.shop_product_id })" xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" class="bi bi-heart" viewBox="0 0 16 16">
                        <path d="M8 2.748l-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"/>
                        </svg>`);
                    else
                        $('#favorite').html(`
                        <svg onclick="favorite_add(${ data.shop_product_id })" xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                        </svg>`);

                    console.log(data.favor)
                    {% comment %} $('"#like_count_container').text(data.like_count);
                    $('#dislike_count_container').text(data.dislike_count); {% endcomment %}
                }
            });
        }
    </script>

{% endblock %}